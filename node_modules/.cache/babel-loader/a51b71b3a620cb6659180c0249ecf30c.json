{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import{listPosts}from'../graphql/queries';import Amplify,{API,graphqlOperation}from'aws-amplify';import Carousel from'react-gallery-carousel';import'react-gallery-carousel/dist/index.css';import{firebase}from'../firebase';import{usePaystackPayment}from'react-paystack';import{GoogleAuthProvider}from\"firebase/auth\";import Popup from'reactjs-popup';import'reactjs-popup/dist/index.css';import{getAuth,signInWithPopup}from\"firebase/auth\";import{css}from\"@emotion/react\";import SyncLoader from\"react-spinners/SyncLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var override=css(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: block;\\n  margin: 0 auto;\\n  margin-bottom: 180px;\\n  margin-top: 180px;\\n\"])));var provider=new GoogleAuthProvider();var auth=getAuth();var user=auth.currentUser;signInWithPopup(auth,provider).then(function(result){// This gives you a Google Access Token. You can use it to access the Google API.\nvar credential=GoogleAuthProvider.credentialFromResult(result);var token=credential.accessToken;// The signed-in user info.\nvar user=result.user;// ...\n}).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;console.log(errorMessage);// The email of the user's account used.\nvar email=error.email;// The AuthCredential type that was used.\nvar credential=GoogleAuthProvider.credentialFromError(error);// ...\n});function Details(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),userIn=_useState2[0],setUserIn=_useState2[1];var location=useLocation();var homeid=location.state.homeid;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),months=_useState6[0],setMonths=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),years=_useState8[0],setYears=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var Modal=function Modal(){return/*#__PURE__*/_jsx(Popup,{trigger:/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\" Open Modal \"}),modal:true,children:/*#__PURE__*/_jsx(\"span\",{children:\" Modal content \"})});};useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var postsResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.graphql(graphqlOperation(listPosts));case 3:postsResult=_context.sent;setPosts(postsResult.data.listPosts.items);if(loading){setLoading(false);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();fetchPosts();},[]);if(posts===undefined){return null;}var post=posts.find(function(place){return place.id===homeid;});var amount=Math.round(post.newPrice*1.07);var images=post.images.map(function(item,index){return{src:item,index:index};});console.log(images);var mobileMoneyConfig={reference:new Date().getTime().toString(),email:\"rentitghana@gmail.com\",amount:amount*100,currency:\"ghs\",channels:[\"mobile_money\"],publicKey:'pk_live_6869737082c788c90a3ea0df0a62018c57fc6759'};var atmConfig={reference:new Date().getTime().toString(),email:\"rentitghana@gmail.com\",amount:amount*100,currency:\"ghs\",channels:[\"card\"],publicKey:'pk_live_6869737082c788c90a3ea0df0a62018c57fc6759'};// you can call this function anything\nvar onSuccess=function onSuccess(reference){// Implementation for whatever you want to do with reference and after success call.\nconsole.log(reference);};// you can call this function anything\nvar onClose=function onClose(){// implementation for  whatever you want to do when the Paystack dialog closed.\nconsole.log('closed');};var PayMobileMoney=function PayMobileMoney(){var initializePayment=usePaystackPayment(mobileMoneyConfig);return/*#__PURE__*/_jsx(\"div\",{className:\"px-6 pt-4 pb-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\" bg-black w-full text-xl font-semibold px-2 py-3 rounded-xl bg-blend-color text-white\",onClick:function onClick(){if(user){initializePayment(onSuccess,onClose);}else{return null;}},children:\"Pay with Mobile Money\"})});};var PayATMCard=function PayATMCard(){var initializePayment=usePaystackPayment(atmConfig);return/*#__PURE__*/_jsx(\"div\",{className:\"px-6 pt-4 pb-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\" bg-pink-600 w-full text-xl font-semibold px-2 py-3 rounded-xl bg-blend-color text-white\",onClick:function onClick(){initializePayment(onSuccess,onClose);},children:\"Pay with ATM Card\"})});};if(loading&&post===null){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"main\",{className:\"flex\",children:/*#__PURE__*/_jsx(SyncLoader,{color:\"deeppink\",css:override,size:12})})});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"main\",{className:\"flex\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"flex-grow pt-14 px-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"flex text-4xl font-bold mt-2 mb-6\",children:post.title}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"flex-items-center text-xl font-light mb-4\",children:[post.type,\" | \",post.bed,\" bed | \",post.bedroom,\" bedrooms\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 rounded-xl\",children:/*#__PURE__*/_jsx(Carousel,{className:\"mb-4\",isLoop:true,isAutoPlaying:true,canAutoPlay:true,hasThumbnails:false,images:images,style:{height:500,width:700}})}),/*#__PURE__*/_jsxs(\"div\",{class:\"px-4 py-4 mb-6 max-w-sm rounded-2xl bg-opacity-100 opacity-100 border border-gray-300 mx-10 bg-white  overflow-hidden shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"px-6 py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"flex font-bold text-xl mb-2 mt-2\",children:[\"GH\\u20B5 \",Math.round(amount),\" / year\"]}),/*#__PURE__*/_jsx(\"div\",{className:\" border-b w-100 mb-2\",children:\" \"}),/*#__PURE__*/_jsxs(\"p\",{class:\"mb-10 flex justify-between text-gray-700 text-base\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"flex text-sm mr-4 font-semibold\",children:\" How many years\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setYears(Math.max(0,years-1));},className:\"cursor-pointer px-4 ml-4 flex text-md font-semibold rounded-full  bg-pink-white border border-black\",children:\"-\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4\",children:years}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setYears(years+1);},className:\"cursor-pointer px-4 flex text-md font-semibold rounded-full  bg-pink-white border border-black\",children:\"+\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" border-b w-100 mb-2 mt-2\",children:\" \"}),/*#__PURE__*/_jsxs(\"p\",{class:\"mb-10 flex justify-between text-gray-700 text-base\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"flex text-sm mr-4 font-semibold\",children:\" How many months\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setMonths(Math.max(0,months-1));},className:\"cursor-pointer px-4 ml-4 flex  text-md font-semibold rounded-full  bg-pink-white border border-black\",children:\"-\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4\",children:months}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setMonths(months+1);},className:\"cursor-pointer px-4 flex text-md font-semibold rounded-full  bg-pink-white border border-black\",children:\"+\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" border-b w-100 mb-2\",children:\" \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between px-4 py-4 mb-10 border w-full border-black rounded-2xl max-w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Years\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Months\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Total\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:years}),/*#__PURE__*/_jsx(\"p\",{children:months}),/*#__PURE__*/_jsxs(\"p\",{children:[\"GH\\u20B5\",Math.round(amount*(years+months/12))]})]})]}),/*#__PURE__*/_jsx(PayMobileMoney,{}),/*#__PURE__*/_jsx(PayATMCard,{})]})]})]})})});}export default Details;","map":{"version":3,"sources":["/Users/ebenobiri/rentitghana.github.io/src/screens/Details.js"],"names":["React","useState","useEffect","useLocation","listPosts","Amplify","API","graphqlOperation","Carousel","firebase","usePaystackPayment","GoogleAuthProvider","Popup","getAuth","signInWithPopup","css","SyncLoader","override","provider","auth","user","currentUser","then","result","credential","credentialFromResult","token","accessToken","catch","error","errorCode","code","errorMessage","message","console","log","email","credentialFromError","Details","userIn","setUserIn","location","homeid","state","posts","setPosts","months","setMonths","years","setYears","loading","setLoading","Modal","fetchPosts","graphql","postsResult","data","items","undefined","post","find","place","id","amount","Math","round","newPrice","images","map","item","index","src","mobileMoneyConfig","reference","Date","getTime","toString","currency","channels","publicKey","atmConfig","onSuccess","onClose","PayMobileMoney","initializePayment","PayATMCard","title","type","bed","bedroom","height","width","max"],"mappings":"qgBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAAQC,SAAR,KAAwB,oBAAxB,CACA,MAAOC,CAAAA,OAAP,EAAkBC,GAAlB,CAAuBC,gBAAvB,KAA+C,aAA/C,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAO,uCAAP,CACA,OAAQC,QAAR,KAAuB,aAAvB,CACA,OAASC,kBAAT,KAAmC,gBAAnC,CACA,OAASC,kBAAT,KAAmC,eAAnC,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAO,8BAAP,CAGA,OAASC,OAAT,CAAkBC,eAAlB,KAAwC,eAAxC,CACA,OAASC,GAAT,KAAoB,gBAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,C,wFAGA,GAAMC,CAAAA,QAAQ,CAAGF,GAAH,wJAAd,CAOA,GAAMG,CAAAA,QAAQ,CAAG,GAAIP,CAAAA,kBAAJ,EAAjB,CACA,GAAMQ,CAAAA,IAAI,CAAGN,OAAO,EAApB,CACA,GAAMO,CAAAA,IAAI,CAAGD,IAAI,CAACE,WAAlB,CACAP,eAAe,CAACK,IAAD,CAAOD,QAAP,CAAf,CACGI,IADH,CACQ,SAACC,MAAD,CAAY,CAChB;AACA,GAAMC,CAAAA,UAAU,CAAGb,kBAAkB,CAACc,oBAAnB,CAAwCF,MAAxC,CAAnB,CACA,GAAMG,CAAAA,KAAK,CAAGF,UAAU,CAACG,WAAzB,CACA;AACA,GAAMP,CAAAA,IAAI,CAAGG,MAAM,CAACH,IAApB,CACA;AACD,CARH,EAQKQ,KARL,CAQW,SAACC,KAAD,CAAW,CAClB;AACA,GAAMC,CAAAA,SAAS,CAAGD,KAAK,CAACE,IAAxB,CACA,GAAMC,CAAAA,YAAY,CAAGH,KAAK,CAACI,OAA3B,CACAC,OAAO,CAACC,GAAR,CAAYH,YAAZ,EACA;AACA,GAAMI,CAAAA,KAAK,CAAGP,KAAK,CAACO,KAApB,CACA;AACA,GAAMZ,CAAAA,UAAU,CAAGb,kBAAkB,CAAC0B,mBAAnB,CAAuCR,KAAvC,CAAnB,CACA;AACD,CAlBH,EAwBA,QAASS,CAAAA,OAAT,EAAmB,CACf,cAA8BrC,QAAQ,CAAC,IAAD,CAAtC,wCAAOsC,MAAP,eAAgBC,SAAhB,eAGA,GAAMC,CAAAA,QAAQ,CAAGtC,WAAW,EAA5B,CACA,GAAMuC,CAAAA,MAAM,CAAGD,QAAQ,CAACE,KAAT,CAAeD,MAA9B,CACA,eAA0BzC,QAAQ,EAAlC,yCAAO2C,KAAP,eAAcC,QAAd,eACA,eAA4B5C,QAAQ,CAAC,CAAD,CAApC,yCAAO6C,MAAP,eAAeC,SAAf,eACA,eAA0B9C,QAAQ,CAAC,CAAD,CAAlC,yCAAO+C,KAAP,eAAcC,QAAd,eACA,eAA8BhD,QAAQ,CAAC,IAAD,CAAtC,0CAAOiD,OAAP,gBAAgBC,UAAhB,gBACA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,sBACV,KAAC,KAAD,EAAO,OAAO,cAAE,eAAQ,SAAS,CAAC,QAAlB,0BAAhB,CAAkE,KAAK,KAAvE,uBACE,yCADF,EADU,EAAd,CAKAlD,SAAS,CAAG,UAAM,CACd,GAAMmD,CAAAA,UAAU,0FAAG,yLAEe/C,CAAAA,GAAG,CAACgD,OAAJ,CACtB/C,gBAAgB,CAACH,SAAD,CADM,CAFf,QAELmD,WAFK,eAMXV,QAAQ,CAACU,WAAW,CAACC,IAAZ,CAAiBpD,SAAjB,CAA2BqD,KAA5B,CAAR,CACA,GAAGP,OAAH,CAAW,CACPC,UAAU,CAAC,KAAD,CAAV,CACH,CATU,+EAWXjB,OAAO,CAACC,GAAR,cAXW,oEAAH,kBAAVkB,CAAAA,UAAU,0CAAhB,CAeAA,UAAU,GACb,CAjBQ,CAiBN,EAjBM,CAAT,CAkBA,GAAGT,KAAK,GAAKc,SAAb,CAAuB,CACnB,MAAO,KAAP,CACH,CAGD,GAAMC,CAAAA,IAAI,CAAGf,KAAK,CAACgB,IAAN,CAAW,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACC,EAAN,GAAapB,MAAjB,EAAhB,CAAb,CACA,GAAMqB,CAAAA,MAAM,CAAGC,IAAI,CAACC,KAAL,CAAWN,IAAI,CAACO,QAAL,CAAgB,IAA3B,CAAf,CACA,GAAMC,CAAAA,MAAM,CAAGR,IAAI,CAACQ,MAAL,CAAYC,GAAZ,CAAgB,SAACC,IAAD,CAAOC,KAAP,QAAkB,CAC7CC,GAAG,CAAEF,IADwC,CAE7CC,KAAK,CAAEA,KAFsC,CAAlB,EAAhB,CAAf,CAIEpC,OAAO,CAACC,GAAR,CAAYgC,MAAZ,EAGA,GAAMK,CAAAA,iBAAiB,CAAG,CACxBC,SAAS,CAAG,GAAIC,CAAAA,IAAJ,EAAD,CAAaC,OAAb,GAAuBC,QAAvB,EADa,CAExBxC,KAAK,CAAE,uBAFiB,CAGxB2B,MAAM,CAAEA,MAAM,CAAC,GAHS,CAIxBc,QAAQ,CAAC,KAJe,CAKxBC,QAAQ,CAAE,CAAC,cAAD,CALc,CAMxBC,SAAS,CAAE,kDANa,CAA1B,CAQF,GAAMC,CAAAA,SAAS,CAAG,CACdP,SAAS,CAAG,GAAIC,CAAAA,IAAJ,EAAD,CAAaC,OAAb,GAAuBC,QAAvB,EADG,CAEdxC,KAAK,CAAE,uBAFO,CAGd2B,MAAM,CAAEA,MAAM,CAAC,GAHD,CAIdc,QAAQ,CAAC,KAJK,CAKdC,QAAQ,CAAE,CAAC,MAAD,CALI,CAMdC,SAAS,CAAE,kDANG,CAAlB,CASA;AACA,GAAME,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACR,SAAD,CAAe,CAC/B;AACAvC,OAAO,CAACC,GAAR,CAAYsC,SAAZ,EACD,CAHD,CAKA;AACA,GAAMS,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB;AACAhD,OAAO,CAACC,GAAR,CAAY,QAAZ,EACD,CAHD,CAKA,GAAMgD,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B,GAAMC,CAAAA,iBAAiB,CAAG1E,kBAAkB,CAAC8D,iBAAD,CAA5C,CACA,mBACE,YAAK,SAAS,CAAC,gBAAf,uBACI,eAAQ,SAAS,CAAC,uFAAlB,CACiD,OAAO,CAAE,kBAAM,CAC5D,GAAIpD,IAAJ,CAAS,CACLgE,iBAAiB,CAACH,SAAD,CAAYC,OAAZ,CAAjB,CACH,CAFD,IAGI,CACA,MAAO,KAAP,CACH,CAEJ,CATD,mCADJ,EADF,CAcH,CAhBC,CAkBF,GAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAMD,CAAAA,iBAAiB,CAAG1E,kBAAkB,CAACsE,SAAD,CAA5C,CACA,mBACE,YAAK,SAAS,CAAC,gBAAf,uBACI,eAAQ,SAAS,CAAC,0FAAlB,CACiD,OAAO,CAAE,kBAAM,CAE1DI,iBAAiB,CAACH,SAAD,CAAYC,OAAZ,CAAjB,CAGL,CAND,+BADJ,EADF,CAWH,CAbC,CAcE,GAAIhC,OAAO,EAAIS,IAAI,GAAK,IAAxB,CAA6B,CACrB,mBAAO,kCACH,aAAM,SAAS,CAAC,MAAhB,uBACA,KAAC,UAAD,EAAY,KAAK,CAAE,UAAnB,CAA+B,GAAG,CAAE1C,QAApC,CAA+C,IAAI,CAAE,EAArD,EADA,EADG,EAAP,CAKH,CACL,mBACI,kCACI,aAAM,SAAS,CAAC,MAAhB,uBACI,iBAAS,SAAS,CAAC,sBAAnB,wBAEI,WAAI,SAAS,CAAC,mCAAd,UAAmD0C,IAAI,CAAC2B,KAAxD,EAFJ,cAGI,YAAK,SAAS,CAAC,sBAAf,uBAEI,WAAG,SAAS,CAAC,2CAAb,WAA0D3B,IAAI,CAAC4B,IAA/D,OAAwE5B,IAAI,CAAC6B,GAA7E,WAAyF7B,IAAI,CAAC8B,OAA9F,eAFJ,EAHJ,cAOI,aAAK,SAAS,CAAC,sBAAf,wBACI,YAAK,SAAS,CAAC,iBAAf,uBACA,KAAC,QAAD,EACA,SAAS,CAAC,MADV,CAEA,MAAM,CAAE,IAFR,CAGA,aAAa,CAAE,IAHf,CAIA,WAAW,CAAE,IAJb,CAKA,aAAa,CAAE,KALf,CAMA,MAAM,CAAEtB,MANR,CAOA,KAAK,CAAE,CAAEuB,MAAM,CAAE,GAAV,CAAeC,KAAK,CAAE,GAAtB,CAPP,EADA,EADJ,cAaJ,aAAK,KAAK,CAAC,kIAAX,wBACI,aAAK,KAAK,CAAC,WAAX,wBACI,aAAK,KAAK,CAAC,kCAAX,uBAAmD3B,IAAI,CAACC,KAAL,CAAWF,MAAX,CAAnD,aADJ,cAEI,YAAK,SAAS,CAAC,sBAAf,eAFJ,cAGI,WAAG,KAAK,CAAC,oDAAT,wBACI,kCACI,UAAG,SAAS,CAAC,iCAAb,6BADJ,EADJ,cAII,aAAK,SAAS,CAAC,sBAAf,wBACI,UAAG,OAAO,CAAE,yBAAMd,CAAAA,QAAQ,CAACe,IAAI,CAAC4B,GAAL,CAAS,CAAT,CAAY5C,KAAK,CAAG,CAApB,CAAD,CAAd,EAAZ,CAAoD,SAAS,CAAC,qGAA9D,eADJ,cAEI,UAAG,SAAS,CAAC,MAAb,UAAqBA,KAArB,EAFJ,cAGI,UAAG,OAAO,CAAE,yBAAMC,CAAAA,QAAQ,CAAED,KAAK,CAAG,CAAV,CAAd,EAAZ,CAAwC,SAAS,CAAC,gGAAlD,eAHJ,GAJJ,GAHJ,cAcI,YAAK,SAAS,CAAC,2BAAf,eAdJ,cAeI,WAAG,KAAK,CAAC,oDAAT,wBACI,kCACI,UAAG,SAAS,CAAC,iCAAb,8BADJ,EADJ,cAII,aAAK,SAAS,CAAC,sBAAf,wBACI,UAAG,OAAO,CAAE,yBAAMD,CAAAA,SAAS,CAACiB,IAAI,CAAC4B,GAAL,CAAS,CAAT,CAAY9C,MAAM,CAAG,CAArB,CAAD,CAAf,EAAZ,CAAsD,SAAS,CAAC,sGAAhE,eADJ,cAEI,UAAG,SAAS,CAAC,MAAb,UAAqBA,MAArB,EAFJ,cAGI,UAAG,OAAO,CAAE,yBAAMC,CAAAA,SAAS,CAAED,MAAM,CAAG,CAAX,CAAf,EAAZ,CAA0C,SAAS,CAAC,gGAApD,eAHJ,GAJJ,GAfJ,cA0BI,YAAK,SAAS,CAAC,sBAAf,eA1BJ,GADJ,cA8BI,aAAK,SAAS,CAAC,wFAAf,wBACI,oCACI,4BADJ,cAEI,6BAFJ,cAGI,4BAHJ,GADJ,cAMI,oCACA,mBAAIE,KAAJ,EADA,cAEA,mBAAIF,MAAJ,EAFA,cAGA,gCAAOkB,IAAI,CAACC,KAAL,CAAWF,MAAM,EAAEf,KAAK,CAAEF,MAAM,CAAC,EAAhB,CAAjB,CAAP,GAHA,GANJ,GA9BJ,cA0CI,KAAC,cAAD,IA1CJ,cA2CI,KAAC,UAAD,IA3CJ,GAbI,GAPJ,GADJ,EADJ,EADJ,CA8EH,CAED,cAAeR,CAAAA,OAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useLocation } from 'react-router-dom';\nimport {listPosts} from '../graphql/queries'\nimport Amplify, { API, graphqlOperation } from 'aws-amplify'\nimport Carousel from 'react-gallery-carousel';\nimport 'react-gallery-carousel/dist/index.css';\nimport {firebase} from '../firebase';\nimport { usePaystackPayment } from 'react-paystack';\nimport { GoogleAuthProvider } from \"firebase/auth\";\nimport Popup from 'reactjs-popup';\nimport 'reactjs-popup/dist/index.css';\n\n\nimport { getAuth, signInWithPopup} from \"firebase/auth\";\nimport { css } from \"@emotion/react\";\nimport SyncLoader from \"react-spinners/SyncLoader\";\n\n\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  margin-bottom: 180px;\n  margin-top: 180px;\n`;\n\nconst provider = new GoogleAuthProvider();\nconst auth = getAuth();\nconst user = auth.currentUser;\nsignInWithPopup(auth, provider)\n  .then((result) => {\n    // This gives you a Google Access Token. You can use it to access the Google API.\n    const credential = GoogleAuthProvider.credentialFromResult(result);\n    const token = credential.accessToken;\n    // The signed-in user info.\n    const user = result.user;\n    // ...\n  }).catch((error) => {\n    // Handle Errors here.\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    console.log(errorMessage);\n    // The email of the user's account used.\n    const email = error.email;\n    // The AuthCredential type that was used.\n    const credential = GoogleAuthProvider.credentialFromError(error);\n    // ...\n  });\n\n\n\n  \n  \nfunction Details() {\n    const [userIn , setUserIn] =  useState(true);\n    \n    \n    const location = useLocation();\n    const homeid = location.state.homeid;\n    const [posts, setPosts] = useState();\n    const [months, setMonths] = useState(0);\n    const [years, setYears] = useState(0);\n    const [loading, setLoading] = useState(true);\n    const Modal = () => (\n        <Popup trigger={<button className=\"button\"> Open Modal </button>} modal>\n          <span> Modal content </span>\n        </Popup>\n      );\n    useEffect ( () => {\n        const fetchPosts = async () => {\n            try{\n                const postsResult = await API.graphql(\n                    graphqlOperation(listPosts)\n                )\n\n                setPosts(postsResult.data.listPosts.items);\n                if(loading){\n                    setLoading(false);\n                }\n            } catch (e){\n                console.log(e);\n            }\n        }\n\n        fetchPosts();\n    }, [])\n    if(posts === undefined){\n        return null;\n    }\n\n\n    const post = posts.find(place => place.id === homeid);\n    const amount = Math.round(post.newPrice * 1.07);\n    const images = post.images.map((item, index) => ({\n        src: item,\n        index: index\n      }));\n      console.log(images);\n\n\n      const mobileMoneyConfig = {\n        reference: (new Date()).getTime().toString(),\n        email: \"rentitghana@gmail.com\",\n        amount: amount*100,\n        currency:\"ghs\",\n        channels: [\"mobile_money\"],\n        publicKey: 'pk_live_6869737082c788c90a3ea0df0a62018c57fc6759',\n    };\n    const atmConfig = {\n        reference: (new Date()).getTime().toString(),\n        email: \"rentitghana@gmail.com\",\n        amount: amount*100,\n        currency:\"ghs\",\n        channels: [\"card\"],\n        publicKey: 'pk_live_6869737082c788c90a3ea0df0a62018c57fc6759',\n    };\n    \n    // you can call this function anything\n    const onSuccess = (reference) => {\n      // Implementation for whatever you want to do with reference and after success call.\n      console.log(reference);\n    };\n  \n    // you can call this function anything\n    const onClose = () => {\n      // implementation for  whatever you want to do when the Paystack dialog closed.\n      console.log('closed')\n    }\n  \n    const PayMobileMoney = () => {\n      const initializePayment = usePaystackPayment(mobileMoneyConfig);\n      return (\n        <div className=\"px-6 pt-4 pb-2\">\n            <button className=\" bg-black w-full text-xl font-semibold\n             px-2 py-3 rounded-xl bg-blend-color text-white\" onClick={() => {\n                if (user){\n                    initializePayment(onSuccess, onClose)\n                }\n                else{\n                    return null;\n                }\n                \n            }}>Pay with Mobile Money</button>\n        </div>\n      );\n  };\n\n  const PayATMCard = () => {\n    const initializePayment = usePaystackPayment(atmConfig);\n    return (\n      <div className=\"px-6 pt-4 pb-2\">\n          <button className=\" bg-pink-600 w-full text-xl font-semibold\n           px-2 py-3 rounded-xl bg-blend-color text-white\" onClick={() => {\n               \n                initializePayment(onSuccess, onClose)\n               \n              \n          }}>Pay with ATM Card</button>\n      </div>\n    );\n};\n    if (loading && post === null){\n            return <div>\n                <main className=\"flex\">\n                <SyncLoader color={\"deeppink\"} css={override}  size={12} />\n                </main>\n            </div>\n        }\n    return (\n        <div>\n            <main className='flex'>\n                <section className=\"flex-grow pt-14 px-6\">\n\n                    <h1 className=\"flex text-4xl font-bold mt-2 mb-6\">{post.title}</h1>\n                    <div className=\"flex justify-between\">\n\n                        <p className=\"flex-items-center text-xl font-light mb-4\">{post.type} | {post.bed} bed | {post.bedroom} bedrooms</p>\n                    </div>\n                    <div className=\"flex justify-between\">\n                        <div className=\"mb-4 rounded-xl\">\n                        <Carousel\n                        className=\"mb-4\"\n                        isLoop={true}\n                        isAutoPlaying={true}\n                        canAutoPlay={true} \n                        hasThumbnails={false}\n                        images={images}\n                        style={{ height: 500, width: 700 }}\n                            /> \n                        </div>\n                \n                <div class=\"px-4 py-4 mb-6 max-w-sm rounded-2xl bg-opacity-100 opacity-100 border border-gray-300 mx-10 bg-white  overflow-hidden shadow-2xl\">\n                    <div class=\"px-6 py-4\">\n                        <div class=\"flex font-bold text-xl mb-2 mt-2\">GH₵ {Math.round(amount)} / year</div>\n                        <div className=\" border-b w-100 mb-2\"> </div>\n                        <p class=\"mb-10 flex justify-between text-gray-700 text-base\">\n                            <div>\n                                <p className=\"flex text-sm mr-4 font-semibold\"> How many years</p>\n                            </div>\n                            <div className=\"flex justify-between\">\n                                <p onClick={() => setYears(Math.max(0, years - 1))} className=\"cursor-pointer px-4 ml-4 flex text-md font-semibold rounded-full  bg-pink-white border border-black\">-</p>\n                                <p className=\"px-4\">{years}</p>\n                                <p onClick={() => setYears (years + 1)} className=\"cursor-pointer px-4 flex text-md font-semibold rounded-full  bg-pink-white border border-black\">+</p>\n                            </div>\n                            \n                        </p>\n                        <div className=\" border-b w-100 mb-2 mt-2\"> </div>\n                        <p class=\"mb-10 flex justify-between text-gray-700 text-base\">\n                            <div>\n                                <p className=\"flex text-sm mr-4 font-semibold\"> How many months</p>\n                            </div>\n                            <div className=\"flex justify-between\">\n                                <p onClick={() => setMonths(Math.max(0, months - 1))} className=\"cursor-pointer px-4 ml-4 flex  text-md font-semibold rounded-full  bg-pink-white border border-black\">-</p>\n                                <p className=\"px-4\">{months}</p>\n                                <p onClick={() => setMonths (months + 1)} className=\"cursor-pointer px-4 flex text-md font-semibold rounded-full  bg-pink-white border border-black\">+</p>\n                            </div>\n                            \n                        </p>\n                        <div className=\" border-b w-100 mb-2\"> </div>\n                    </div>\n\n                    <div className=\"flex justify-between px-4 py-4 mb-10 border w-full border-black rounded-2xl max-w-full\">\n                        <div>\n                            <p>Years</p>\n                            <p>Months</p>\n                            <p>Total</p>\n                        </div>\n                        <div>\n                        <p>{years}</p>\n                        <p>{months}</p>\n                        <p>GH₵{Math.round(amount*(years+(months/12)))}</p>\n                            </div>\n                    </div>\n                    <PayMobileMoney />\n                    <PayATMCard />\n                    \n                    </div>\n                        \n                    </div>\n                \n                \n                </section>\n            </main>\n            \n        </div>\n    )\n}\n\nexport default Details\n"]},"metadata":{},"sourceType":"module"}