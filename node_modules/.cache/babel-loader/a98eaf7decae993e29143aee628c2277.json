{"ast":null,"code":"import _toConsumableArray from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ebenobiri/rentitghana.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import{listPosts}from'../graphql/queries';import Amplify,{API,graphqlOperation}from'aws-amplify';import InfoCard from'../components/InfoCard';import SearchMap from'../components/SearchMap';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function SearchPage(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),datalist=_useState4[0],setDatalist=_useState4[1];var location=useLocation();var nelatitude=location.state.nelatitude;var swlatitude=location.state.swlatitude;var nelongitude=location.state.nelongitude;var swlongitude=location.state.swlongitude;var title=location.state.title;useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var postsResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.graphql(graphqlOperation(listPosts,{filter:{and:{latitude:{between:[// Latitude - (0.4/2),\n// Latitude + (0.4/2),\nswlatitude,nelatitude//viewport.southwest.lat,\n//viewport.northeast.lat,\n]},longitude:{between:[//   Longitude - (0.4/2),\n//   Longitude + (0.4/2),\n//viewport.southwest.lng,\n//viewport.northeast.lng,\nswlongitude,nelongitude]}}}}));case 3:postsResult=_context.sent;setPosts(postsResult.data.listPosts.items);setDatalist(postsResult.data.listPosts.items);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();fetchPosts();},[]);var filterList=function filterList(){setDatalist(_toConsumableArray(posts.filter(function(category){return category.type===\"Full Home\";})));};//console.log(initialPost.length)\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"main\",{className:\"flex\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"flex-grow pt-14 px-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"flex text-4xl font-bold mt-2 mb-6\",children:[datalist.length,\" Homes available for rent,  \",title||'']}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mb-5 space-x-4 text-gray-800 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:filterList,className:\"px-4 py-2 border rounded-full cursor-pointer hover:shadow-lg active:scale-95  hover:bg-black hover:text-white transition transform duration-100 ease-out\",children:\"Full Home\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-2 border rounded-full cursor-pointer hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform duration-100 hover:bg-black hover:text-white ease-out\",children:\"Self-Contained\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-2 border rounded-full cursor-pointer hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform duration-100 hover:bg-black hover:text-white ease-out\",children:\"Single Room\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-2 border rounded-full cursor-pointer hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform hover:bg-black hover:text-white duration-100 ease-out\",children:\"Entire Flat\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-2 border rounded-full cursor-pointer hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform hover:bg-black hover:text-white duration-100 ease-out\",children:\"Apartment\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col\",children:datalist===null||datalist===void 0?void 0:datalist.map(function(_ref2){var id=_ref2.id,oldPrice=_ref2.oldPrice,bed=_ref2.bed,bedroom=_ref2.bedroom,newPrice=_ref2.newPrice,description=_ref2.description,image=_ref2.image,longitude=_ref2.longitude,latitude=_ref2.latitude,type=_ref2.type,title=_ref2.title;return/*#__PURE__*/_jsx(InfoCard,{image:image,title:title,description:description,longitude:longitude,latitude:latitude,newPrice:newPrice,oldPrice:oldPrice,bed:bed,bedroom:bedroom,id:id,type:type},id);})})]}),/*#__PURE__*/_jsx(\"section\",{className:\"flex\",children:/*#__PURE__*/_jsx(SearchMap,{})})]})});}export default SearchPage;","map":{"version":3,"sources":["/Users/ebenobiri/rentitghana.github.io/src/screens/SearchPage.js"],"names":["React","useEffect","useState","useLocation","listPosts","Amplify","API","graphqlOperation","InfoCard","SearchMap","SearchPage","props","posts","setPosts","datalist","setDatalist","location","nelatitude","state","swlatitude","nelongitude","swlongitude","title","fetchPosts","graphql","filter","and","latitude","between","longitude","postsResult","data","items","console","log","filterList","category","type","length","map","id","oldPrice","bed","bedroom","newPrice","description","image"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { useLocation } from 'react-router-dom';\nimport {listPosts} from '../graphql/queries'\nimport Amplify, { API, graphqlOperation } from 'aws-amplify'\nimport InfoCard from '../components/InfoCard';\nimport SearchMap from '../components/SearchMap';\nfunction SearchPage(props) {\n    const[posts, setPosts] = useState([]);\n    const[datalist, setDatalist] = useState([])\n    const location = useLocation();\n    const nelatitude = location.state.nelatitude;\n    const swlatitude = location.state.swlatitude;\n    const nelongitude = location.state.nelongitude;\n    const swlongitude = location.state.swlongitude;\n    const title = location.state.title;\n    useEffect ( () => {\n    const fetchPosts = async () => {\n        try{\n            const postsResult = await API.graphql(\n                graphqlOperation(listPosts, {\n\n                    filter: {\n                        and: {\n                            \n                            latitude: {\n                                between: [\n                                    // Latitude - (0.4/2),\n                                    // Latitude + (0.4/2),\n                                    \n                                    swlatitude,\n                                    nelatitude,\n                                    //viewport.southwest.lat,\n                                    //viewport.northeast.lat,\n                                ],\n                            },\n                            longitude: {\n                                between: [\n                                  \n                                //   Longitude - (0.4/2),\n                                //   Longitude + (0.4/2),\n                                    //viewport.southwest.lng,\n                                    //viewport.northeast.lng,\n                                    \n                                    swlongitude,\n                                    nelongitude,\n                                ],\n                            }\n                        }\n                        \n                    }\n                \n            })\n            )\n\n            setPosts(postsResult.data.listPosts.items);\n            setDatalist(postsResult.data.listPosts.items);\n        } catch (e){\n            console.log(e);\n        }\n    }\n\n    fetchPosts();\n}, [])\n\nconst filterList = () => {\n    setDatalist([...posts.filter(category => category.type === \"Full Home\")])\n    \n}\n//console.log(initialPost.length)\n    return (\n        <div>\n            <main className='flex'>\n                <section className=\"flex-grow pt-14 px-6\">\n\n                    <h1 className=\"flex text-4xl font-bold mt-2 mb-6\">{datalist.length} Homes available for rent,  { title || ''}</h1>\n                \n                <div className=\"flex mb-5 space-x-4 text-gray-800 whitespace-nowrap\">\n                    <p onClick={filterList} className=\"px-4 py-2 border rounded-full cursor-pointer\n                    hover:shadow-lg active:scale-95  hover:bg-black hover:text-white transition transform\n                    duration-100 ease-out\">Full Home</p>\n\n                    <p className=\"px-4 py-2 border rounded-full cursor-pointer\n                    hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform\n                    duration-100 hover:bg-black hover:text-white ease-out\">Self-Contained</p>\n\n                    <p className=\"px-4 py-2 border rounded-full cursor-pointer\n                    hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform\n                    duration-100 hover:bg-black hover:text-white ease-out\">Single Room</p>\n\n                    <p className=\"px-4 py-2 border rounded-full cursor-pointer\n                    hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform\n                    hover:bg-black hover:text-white duration-100 ease-out\">Entire Flat</p>\n\n                    <p className=\"px-4 py-2 border rounded-full cursor-pointer\n                    hover:shadow-lg active:scale-95 active:bg-gray-700 transition transform\n                    hover:bg-black hover:text-white duration-100 ease-out\">Apartment</p>\n                </div>\n                <div className=\"flex flex-col\">\n\n                {datalist?.map(({id, oldPrice, bed, bedroom, newPrice, description, \n                image, longitude, latitude, type, title,}) => (\n              <InfoCard\n                key={id}\n                image={image}\n                title={title}\n                description={description}\n                longitude={longitude}\n                latitude={latitude}\n                newPrice={newPrice}\n                oldPrice={oldPrice}\n                bed={bed}\n                bedroom={bedroom}\n                id={id}\n                type={type}\n                \n              />\n          ))}\n\n                </div>\n                </section>\n\n            <section className=\"flex\">\n                    <SearchMap />\n            </section>\n            </main>\n        </div>\n    )\n}\n\nexport default SearchPage\n"]},"metadata":{},"sourceType":"module"}